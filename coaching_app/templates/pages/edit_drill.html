{% extends "base.html" %}

{% block content %}
<!-- TODO schöner gestalten und UI verbessern -->
    <div class="container-md ps-5 pe-5">
        <div class="row">
            <div class="col text-center m-2 p-2 pb-0">
                <h2 class="text-uppercase fw-bold">{% if drill %}{{ drill.name }} bearbeiten{% else %}Neuer Drill{% endif %}</h2>
            </div>
        </div>
    </div>
    
    <form action="{% url 'drills' %}" method="post">
        {% csrf_token %}
        
        <!-- Hidden field for drill ID if editing an existing drill -->
        {% if drill %}
            <input type="hidden" name="drill_id" value="{{ drill.id }}">
        {% endif %}

        <!-- Name des Drills -->
        <div class="row mb-3">
            <div class="col-1"></div>
            <div class="col-10">
                <input 
                    type="text" 
                    id="name" 
                    name="name" 
                    class="form-control" 
                    placeholder="Name des Drills" 
                    value="{% if drill %}{{ drill.name }}{% else %}{{ '' }}{% endif %}"
                    required
                >
            </div>
            <div class="col-1"></div>
        </div>
        
        <!-- Beschreibung des Drills -->
        <div class="row mb-3">
            <div class="col-1"></div>
            <div class="col-10">
                <textarea 
                    id="description" 
                    name="description" 
                    class="form-control" 
                    rows="5" 
                    placeholder="Beschreibung des Drills"
                    required
                >{% if drill %}{{ drill.description }}{% else %}{{ '' }}{% endif %}</textarea>
            </div>
            <div class="col-1"></div>
        </div>
        
        <!-- Skills Auswahl -->
        <div class="row mb-3">
            <div class="col-1"></div>
            <div class="col-10">
                <select id="skill" name="skills" class="form-select" multiple>
                    {% for skill in skills %}
                        <option 
                            value="{{ skill.id }}"
                            {% if drill and skill in drill.skills.all %}selected{% endif %}
                        >{{ skill.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-1"></div>
        </div>
        
        <!-- Intensität Auswahl -->
        <div class="row mb-3">
            <div class="col-1"></div>
            <div class="col-10">
                <label for="intensity" class="form-label">Intensität</label>
                <input 
                    type="range" 
                    class="form-range" 
                    min="1" max="5" 
                    id="intensity" 
                    name="intensity"
                    value="{% if drill %}{{ drill.intensity }}{% else %}3{% endif %}"
                >
            </div>
            <div class="col-1"></div>
        </div>

        <!-- Schwierigkeitsgrad Auswahl -->
        <div class="row mb-3">
            <div class="col-1"></div>
            <div class="col-10">
                <label for="difficulty" class="form-label">Schwierigkeitsgrad</label>
                <input 
                    type="range" 
                    class="form-range" 
                    min="1" max="5" 
                    id="difficulty" 
                    name="difficulty"
                    value="{% if drill %}{{ drill.difficulty }}{% else %}3{% endif %}"
                >
            </div>
            <div class="col-1"></div>
        </div>
        
        <!-- Submit Drill -->
        <div class="row mb-3">
            <div class="col-1"></div>
            <div class="col-10 d-flex">
                <button 
                    type="submit" 
                    class="btn btn-dark custom-nav-btn flex-grow-1" 
                    name="action" 
                    value="{% if drill %}update{% else %}create{% endif %}"
                >{% if drill %}Drill aktualisieren{% else %}Drill erstellen{% endif %}</button>
            </div>
            <div class="col-1"></div>
        </div>
    </form>
{% endblock %}